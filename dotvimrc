" Basic setup
set nocompatible
set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

" let Vundle manage Vundle
" required! 
Bundle 'gmarik/vundle'

" My bundles
Bundle 'vim-ruby/vim-ruby'
Bundle 'scrooloose/nerdcommenter'
Bundle 'mileszs/ack.vim'
Bundle 'clones/vim-autocomplpop'
Bundle 'tpope/vim-endwise'
Bundle 'mattn/gist-vim'
Bundle 'tpope/vim-pastie'
Bundle 'tpope/vim-rails'
Bundle 'msanders/snipmate.vim'
Bundle 'tpope/vim-surround'
Bundle 'scrooloose/syntastic'
Bundle 'godlygeek/tabular'
Bundle 'altercation/vim-colors-solarized'
Bundle 'nanotech/jellybeans.vim'
Bundle 'cschlueter/vim-wombat'
Bundle 'majutsushi/tagbar'
Bundle 'L9'
Bundle 'FuzzyFinder'
Bundle 'millermedeiros/vim-statline'
Bundle 'ZoomWin'
Bundle 'scrooloose/nerdtree'
Bundle 'vim-scripts/argtextobj.vim'
Bundle 'vim-scripts/simplefold'
Bundle 'kana/vim-textobj-user'
Bundle 'nelstrom/vim-textobj-rubyblock'
Bundle 'kana/vim-smartinput'
Bundle 'Lokaltog/vim-powerline'
Bundle 'jgdavey/tslime.vim'
Bundle 'jgdavey/vim-turbux'
Bundle 'tomtom/quickfixsigns_vim'
Bundle 'tpope/vim-fugitive'
Bundle 'tpope/vim-git'
" Bundle 'vim-scripts/conque-shell'
" Bundle 'skwp/vim-ruby-conque'

" My configuration
colorscheme wombat256
imap <Tab> <C-N>
runtime macros/matchit.vim
set autoindent
set complete=.,t
set cursorcolumn
set cursorline
set foldmethod=indent
set foldlevel=1
set hidden
set history=1000
set iskeyword-=_,$,@,%,#
set preserveindent
set relativenumber
set ruler
set scrolloff=3
set showmatch
set title
set visualbell
set wildmenu
set wildmode=list:longest
set wrap
syntax on

" Setup backup location and enable
set backup
set backupdir=/tmp
set directory=/tmp

" Set <Leader> to comma
let mapleader = ','

" Filetype patterns
filetype on
filetype plugin on
filetype indent on

" Tab/indentation configuration
set softtabstop=2
set shiftwidth=2
set expandtab
set smarttab
set ai " autoindent
set si " smartindent


" Search pattern highlight/incremental
set ignorecase
set smartcase
set showmatch
set hlsearch
set incsearch

" A few useful shortcuts
command! Rehash source ~/.vimrc
command! Color echo g:colors_name
command! Helptags helptags ~/.vim/doc

" Save when lost focus
au FocusLost * :wa

" Make the arrow keys switch between splits
map <up> <C-w>k
map <down> <C-w>j
map <right> <C-w>l
map <left> <C-w>h

"toggle unfold
" nnoremap <space> za 
" vnoremap <space> za 

" Navigation between buffers
map <leader>l :e#<cr>

" Added non ruby files in ruby syntax
au BufRead,BufNewFile {Procfile,Capfile,Gemfile,Rakefile,Thorfile,config.ru,.caprc,.irbrc,irb_tempfile*} set ft=ruby

" Copy from clipboard
map <leader>pc :r ! pbpaste<CR>

" FuzzyFinder
let g:fuzzy_ignore = '*.log;*.swp;*~;temp/*;log/*;tmp/*;coverage/*;README;*.jpg;*.png;*.gem'
let g:fuzzy_enumerating_limit = 15
let g:fuzzy_matching_limit = 40
let g:fuzzy_ceiling = 300000
map <leader>bb :FufBuffer<CR>
map <leader>ff :FufCoverageFile<CR>

" NERDTree
map <leader>d :NERDTreeToggle<CR>
map <leader>dd :NERDTreeMirror<CR>
let NERDTreeCaseSensitiveSort = 1
let NERDTreeChDirMode = 2
let NERDTreeIgnore = ['\~$','\.[ao]$','\.swp$','\.DS_Store','\.svn','\.CVS','\.git','\.pyc','\.pyo','log','tmp','coverage']
let NERDTreeMouseMode = 2
let NERDTreeShowLineNumbers = 0
let NERDTreeWinSize = 30
let NERDTreeHijackNetrw = 1

" NERDCommenter
let NERDSpaceDelims = 1

" taglist
let Tlist_Display_Tag_Scope = 0
let Tlist_File_Fold_Auto_Close = 1
let Tlist_Show_Menu = 1
map <Leader>tg :TlistToggle<CR>
map <Leader>th :TlistHighlightTag<CR>
map <Leader>tp :TlistShowPrototype<CR>
map <Leader>tu :TlistUpdate<CR>

" Gist
let g:gist_clip_command = 'pbcopy'
let g:gist_open_browser_after_post = 1

" TagBar
map <Leader>m :TagbarToggle<CR>

" Syntastic 
let g:syntastic_enable_signs=1
let g:syntastic_auto_loc_list=1

" Vim-powerline
" let g:Powerline_symbols = 'fancy'

" Command-T
set wildignore+=*.o,*.obj,.git,spec/fixtures/cassetes/**,vendor/**,bin_stubs/**
au BufRead,BufNewFile {Procfile,Capfile,Gemfile,Rakefile,Thorfile,config.ru,.caprc,.irbrc,irb_tempfile*} set ft=ruby

" Copy from clipboard
map <leader>pc :r ! pbpaste<CR>

" Redraw panel when terminal mess up
nnoremap <leader>rr :redraw!<cr>

" FuzzyFinder
let g:fuzzy_ignore = '*.log;*.swp;*~;temp/*;log/*;tmp/*;coverage/*;README;*.jpg;*.png;*.gem'
let g:fuzzy_enumerating_limit = 15
let g:fuzzy_matching_limit = 40
let g:fuzzy_ceiling = 300000
map <leader>bb :FufBuffer<CR>
map <leader>ff :FufCoverageFile<CR>

" NERDTree
map <leader>d :NERDTreeToggle<CR>
map <leader>dd :NERDTreeMirror<CR>
let NERDTreeCaseSensitiveSort = 1
let NERDTreeChDirMode = 2
let NERDTreeIgnore = ['\~$','\.[ao]$','\.swp$','\.DS_Store','\.svn','\.CVS','\.git','\.pyc','\.pyo','log','tmp','coverage']
let NERDTreeMouseMode = 2
let NERDTreeShowLineNumbers = 0
let NERDTreeWinSize = 30
let NERDTreeHijackNetrw = 1

" NERDCommenter
let NERDSpaceDelims = 1

" taglist
let Tlist_Display_Tag_Scope = 0
let Tlist_File_Fold_Auto_Close = 1
let Tlist_Show_Menu = 1
map <Leader>tg :TlistToggle<CR>
map <Leader>th :TlistHighlightTag<CR>
map <Leader>tp :TlistShowPrototype<CR>
map <Leader>tu :TlistUpdate<CR>

" Gist
let g:gist_clip_command = 'pbcopy'
let g:gist_open_browser_after_post = 1

" Syntastic 
let g:syntastic_enable_signs=1
let g:syntastic_auto_loc_list=1

" Tslime
vmap <C-c><C-c> <Plug>SendSelectionToTmux
nmap <C-c><C-c> <Plug>NormalModeSendToTmux
nmap <C-c>r <Plug>SetTmuxVars
