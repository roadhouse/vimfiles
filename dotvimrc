call plug#begin('~/.vim/plugged')

Plug 'alvan/vim-closetag'
" Plug 'clones/vim-autocomplpop'
Plug 'cschlueter/vim-wombat'
Plug 'ctrlpvim/ctrlp.vim'
Plug 'danro/rename.vim'
Plug 'easymotion/vim-easymotion'
" Plug 'itchyny/lightline.vim'
Plug 'jiangmiao/auto-pairs'
Plug 'kana/vim-smartinput'
Plug 'kana/vim-textobj-user'
Plug 'kassio/neoterm'
" Plug 'eparreno/vim-l9'
Plug 'mattn/gist-vim'
Plug 'mattn/webapi-vim'
Plug 'mileszs/ack.vim'
Plug 'nelstrom/vim-textobj-rubyblock'
Plug 'ngmy/vim-rubocop'
Plug 'scrooloose/nerdcommenter'
Plug 'scrooloose/syntastic'
" Plug 'thoughtbot/vim-rspec'
" Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }
Plug 'tpope/vim-dispatch'
Plug 'tpope/vim-rails'
Plug 'tpope/vim-fugitive'
Plug 'vim-ruby/vim-ruby'
Plug 'vim-scripts/simplefold'
"Plug 'neoclide/coc.nvim', {'branch': 'release'}
" Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }

" Snippets
Plug 'MarcWeber/vim-addon-mw-utils'
Plug 'tomtom/tlib_vim'
Plug 'garbas/vim-snipmate'
Plug 'honza/vim-snippets'

" Javascript
Plug 'pangloss/vim-javascript'
Plug 'othree/javascript-libraries-syntax.vim'
Plug 'MaxMEllon/vim-jsx-pretty'

call plug#end()

" Basic setup
set nocompatible
filetype off
filetype plugin indent on

" My configuration
colorscheme wombat256

runtime macros/matchit.vim

set autoindent
set complete=.,t
set cursorcolumn
set cursorline
set foldmethod=indent
set foldlevel=1
set hidden
set history=1000
set iskeyword+=_,@-@,?,!
set number
set preserveindent
set relativenumber
set ruler
set scrolloff=3
set showmatch
set title
set visualbell
set wildmenu
set wildmode=list:longest
set wrap
set colorcolumn=80

syntax on

" Setup backup location and enable
set backup
set backupdir=/tmp
set directory=/tmp

" Set <Leader> to comma
let mapleader = ','

" Change normal mode leader
nnoremap ; :
nnoremap : ;

" Filetype patterns
filetype plugin indent on

" Tab/indentation configuration
set softtabstop=2
set shiftwidth=2
set expandtab
set smarttab
set ai " autoindent
set si " smartindent

" Search pattern highlight/incremental
set ignorecase
set smartcase
set showmatch
set hlsearch
set incsearch

" alias
ab pry require 'pry';binding.pry

" A few useful shortcuts
command! Rehash source ~/.vimrc
command! Color echo g:colors_name
command! Helptags helptags ~/.vim/doc
command! -range=% RubyNewHashNotation silent execute <line1>.','.<line2>.'s/:\(\w\+\)\s*=>\s*/\1: /g'

" Save when lost focus
au FocusLost * :wa

" remove all trailing whitespace when :w
autocmd BufWritePre * :%s/\s\+$//e

" Make the arrow keys switch between splits
map <up> <C-w>k
map <down> <C-w>j
map <right> <C-w>l
map <left> <C-w>h

"toggle unfold
nnoremap <space> za
vnoremap <space> za

" Navigation between buffers
map <leader>l ;e#<cr>

" Added non ruby files in ruby syntax
au BufRead, BufNewFile {Procfile,Capfile,Gemfile,Rakefile,Thorfile,config.ru,.caprc,.irbrc,irb_tempfile*} set ft=ruby
au BufRead, BufNewFile *.php

" Copy from clipboard
map <leader>pc ;r ! pbpaste<CR>

" FuzzyFinder
let g:fuzzy_ignore = '*.log;*.swp;*~;temp/*;log/*;tmp/*;coverage/*;**//node_modules/*;README;*.jpg;*.png;*.gem'
let g:fuzzy_enumerating_limit = 15
let g:fuzzy_matching_limit = 40
let g:fuzzy_ceiling = 300000
map <leader>bb ;FufBuffer<CR>
map <leader>ff ;FufCoverageFile<CR>

" NERDCommenter
let NERDSpaceDelims = 1
let NERDDefaultNesting = 0

" Gist
let g:gist_clip_command = 'pbcopy'
let g:gist_open_browser_after_post = 1
let g:gist_post_private = 1

" Syntastic
let g:syntastic_enable_signs=1
let g:syntastic_auto_loc_list=1

" Snipmate
let g:snipMate = { 'snippet_version' : 1 }

set wildignore+=*.o,*.obj,.git,*/spec/cassettes/**,*/vendor/**,*/bin_stubs/**,*/tmp/**,*/log/**,*/node_modules/**,*/tools/**
au BufRead,BufNewFile {Procfile,Capfile,Gemfile,Rakefile,Thorfile,config.ru,.caprc,.irbrc,irb_tempfile*} set ft=ruby

" Redraw panel when terminal mess up
nnoremap <leader>rr ;redraw!<cr>

" Airline
set laststatus=2

hi! Normal ctermbg=NONE guibg=NONE
hi! NonText ctermbg=NONE guibg=NONE
